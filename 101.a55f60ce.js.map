{"mappings":"YAQA,MAAMA,EAAO,CACXC,WAAYC,SAASC,cAAc,mBACnCC,kBAAmBF,SAASC,cAAc,0BAC1CE,YAAaH,SAASC,cAAc,8BAGtCH,EAAKC,WAAWK,iBAAiB,UAMjC,SAAkBC,GAChBA,EAAEC,iBAGFC,EAAeC,MAAQH,EAAEI,cAAcC,SAASF,MAAMG,MAEtDJ,EAAeK,YACfL,EACGM,gBACAC,KAAKC,E,IAdVjB,EAAKK,YAAYC,iBAAiB,SAkBlC,SAAoBC,GAClBA,EAAEC,iBAEFC,EACGM,gBACAC,MAAKE,GAAgBC,QAAQC,IAAIF,I,IArBtC,MAAMT,EAAiB,ICjBR,MAMbM,gBAEE,MAMMM,EAAM,uCAAuCC,KAAKC,0CAA0CD,KAAKE,OACvG,OAAOC,MAAMJ,EAPG,CACdK,QAAS,CACPC,cAAe,sCAMhBX,MAAKY,GAAWA,EAAQC,SACxBb,MAAKc,IACJX,QAAQC,IAAIU,GAEZR,KAAKS,gBACED,EAAKE,W,CAGlBD,gBACET,KAAKE,MAAQ,C,CAGfV,YACEQ,KAAKE,KAAO,C,CAGVd,YACF,OAAOY,KAAKC,W,CAGVb,UAAMuB,GACRX,KAAKC,YAAcU,C,CApCrBC,cACEZ,KAAKC,YAAc,GACnBD,KAAKE,KAAO,C,GDsChB,SAASP,EAAakB,GACpB,MAAMC,EAASD,EACZE,KAAI,EAAChB,IAAEA,EAAGiB,WAAEA,EAAUC,MAAEA,EAAKC,OAAEA,EAAMC,YAAEA,KAC/B,oCAEMpB,oFAEDiB,qCACNC,8BACSC,mBACVC,qDAKNC,KAAK,IACR1C,EAAKI,kBAAkBuC,mBAAmB,YAAaP,E","sources":["src/js/101.js","src/js/news-service_101.js"],"sourcesContent":["import NewsApiServise from '../js/news-service_101';\n// Загружаем статьи при сабмите формы\n// Загружаем страницы при клике на кнопку \"Загрузить ещё\"\n// Обновляем страницу и параметры запроса\n// рисуеи статьи\n// Сброс значений при новом критерии поиска\n\n/* https://newsapi.org/v2/everything?q=Apple&from=2022-10-11&sortBy=popularity&apiKey=API_KEY' */\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  articlesContainer: document.querySelector('.js-articles-container'),\n  loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\n};\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nconst newsApiService = new NewsApiServise();\n// let searchQuery =''\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  //   searchQuery = e.currentTarget.elements.query.value;\n  newsApiService.query = e.currentTarget.elements.query.value;\n  //При сабмите формы свойство Page сбрасываем на 1 -ую страницу для поиска\n  newsApiService.resetPage();\n  newsApiService\n    .fetchArticles()\n    .then(renderEvents);\n    // .then(articlesData => console.log(articlesData));\n}\n\nfunction onLoadMore(e) {\n  e.preventDefault();\n\n  newsApiService\n    .fetchArticles()\n    .then(articlesData => console.log(articlesData));\n}\n\nfunction renderEvents(events) {\n  const markup = events\n    .map(({ url, urlToImage, title, author, description }) => {\n      return `\n        <li>\n        <a href=\"${url}\" target=\"blank\" rel=\"noopener noreferrer\">\n        <article>\n      <img src='${urlToImage}' alt='' width='480'>\n      <h2>${title}</h2>\n      <p>Posted by:${author}</p>\n      <p>${description}</p>\n      </article>\n      </a>\n      </li>`;\n    })\n    .join('');\n  refs.articlesContainer.insertAdjacentHTML('beforeend', markup)\n}\n","export default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchArticles() {\n    // console.log(this);\n    const options = {\n      headers: {\n        Authorization: '6be54aba098d4ee4bc21992dc9b3c0d5',\n      },\n    };\n\n    const url = `https://newsapi.org/v2/everything?q=${this.searchQuery}&language=en&pageSize=5&page${this.page}`;\n    return fetch(url, options)\n      .then(resolve => resolve.json())\n      .then(data => {\n        console.log(data);\n        //По результату Успешного запроса - увеличиваем страницу на 1 \n        this.incrementPage()\n        return data.articles\n      });\n  }\n  incrementPage(){\n    this.page += 1;\n  }\n\n  resetPage(){\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["$c9fa63be1c627846$var$refs","searchForm","document","querySelector","articlesContainer","loadMoreBtn","addEventListener","e","preventDefault","$c9fa63be1c627846$var$newsApiService","query","currentTarget","elements","value","resetPage","fetchArticles","then","$c9fa63be1c627846$var$renderEvents","articlesData","console","log","url","this","searchQuery","page","fetch","headers","Authorization","resolve","json","data","incrementPage","articles","newQuery","constructor","events","markup","map","urlToImage","title","author","description","join","insertAdjacentHTML"],"version":3,"file":"101.a55f60ce.js.map"}