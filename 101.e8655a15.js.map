{"mappings":"YACA,MAEMA,EAAU,CACdC,QAAS,CACPC,cAJY,qCCOhB,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,mBACnCC,kBAAmBF,SAASC,cAAc,0BAC1CE,YAAaH,SAASC,cAAc,8BAGtCH,EAAKC,WAAWK,iBAAiB,UAMjC,SAAkBC,GAChBA,EAAEC,iBAGFC,EAAeC,MAAQH,EAAEI,cAAcC,SAASF,MAAMG,MAEtDJ,EAAeK,YACfL,EAAeM,gBAAgBC,MAAMC,IAiCrCjB,EAAKI,kBAAkBc,UAAY,GA9BjCC,EAAaF,EAAS,G,IAf1BjB,EAAKK,YAAYC,iBAAiB,SAmBlC,SAAoBC,GAClBA,EAAEC,iBAEFC,EAAeM,gBAAgBC,KAAKG,E,IApBtC,MAAMV,EAAiB,IDTR,MAMbM,gBAIE,MAAMK,EAAM,uCAA4BC,KAAKC,2CAA2CD,KAAKE,OAC7F,OAAOC,MAAMJ,EAAKvB,GACfmB,MAAKS,GAAWA,EAAQC,SACxBV,MAAK,EAACC,SAACA,MAENI,KAAKM,gBACEV,I,CAGbU,gBACEN,KAAKE,MAAQ,C,CAGfT,YACEO,KAAKE,KAAO,C,CAGVb,YACF,OAAOW,KAAKC,W,CAGVZ,UAAMkB,GACRP,KAAKC,YAAcM,C,CA/BrBC,cACER,KAAKC,YAAc,GACnBD,KAAKE,KAAO,C,GC6BhB,SAASJ,EAAaW,GACpB,IAAIC,EAASD,EACVE,KAAI,EAACZ,IAAEA,EAAGa,WAAEA,EAAUC,MAAEA,EAAKC,OAAEA,EAAMC,YAAEA,KAC/B,oCAEMhB,oFAEDa,qCACNC,8BACSC,mBACVC,qDAKNC,KAAK,IACRrC,EAAKI,kBAAkBkC,mBAAmB,YAAaP,E","sources":["src/js/news-service_101.js","src/js/101.js"],"sourcesContent":["\nconst API_KEY = '6be54aba098d4ee4bc21992dc9b3c0d5'\nconst BASE_URL = 'https://newsapi.org/v2'\nconst options = {\n  headers: {\n    Authorization: API_KEY,\n  },\n}\nexport default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchArticles() {\n    // console.log(this);\n   ;\n\n    const url = `${BASE_URL}/everything?q=${this.searchQuery}&language=en&pageSize=5&page=${this.page}`;\n    return fetch(url, options)\n      .then(resolve => resolve.json())\n      .then(({articles}) => {\n        //По результату Успешного запроса - увеличиваем страницу на 1 \n        this.incrementPage()\n        return articles\n      });\n  }\n  incrementPage(){\n    this.page += 1;\n  }\n\n  resetPage(){\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import NewsApiServise from '../js/news-service_101';\n// Загружаем статьи при сабмите формы\n// Загружаем страницы при клике на кнопку \"Загрузить ещё\"\n// Обновляем страницу и параметры запроса\n// рисуеи статьи\n// Сброс значений при новом критерии поиска\n\n/* https://newsapi.org/v2/everything?q=Apple&from=2022-10-11&sortBy=popularity&apiKey=API_KEY' */\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  articlesContainer: document.querySelector('.js-articles-container'),\n  loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\n};\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nconst newsApiService = new NewsApiServise();\n// let searchQuery =''\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  \n  newsApiService.query = e.currentTarget.elements.query.value;\n  //При сабмите формы свойство Page сбрасываем на 1 -ую страницу для поиска\n  newsApiService.resetPage();\n  newsApiService.fetchArticles().then( articles => {\n    \n    clearArticlescontainer();\n    renderEvents(articles)});\n  // .then(articlesData => console.log(articlesData));\n}\n\nfunction onLoadMore(e) {\n  e.preventDefault();\n\n  newsApiService.fetchArticles().then(renderEvents);\n}\n\nfunction renderEvents(events) {\n  let markup = events\n    .map(({ url, urlToImage, title, author, description }) => {\n      return `\n        <li>\n        <a href=\"${url}\" target=\"blank\" rel=\"noopener noreferrer\">\n        <article>\n      <img src='${urlToImage}' alt='' width='480'>\n      <h2>${title}</h2>\n      <p>Posted by:${author}</p>\n      <p>${description}</p>\n      </article>\n      </a>\n      </li>`;\n    })\n    .join('');\n  refs.articlesContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearArticlescontainer() {\n  refs.articlesContainer.innerHTML = '';\n}\n"],"names":["$1863624c17251243$var$options","headers","Authorization","$c9fa63be1c627846$var$refs","searchForm","document","querySelector","articlesContainer","loadMoreBtn","addEventListener","e","preventDefault","$c9fa63be1c627846$var$newsApiService","query","currentTarget","elements","value","resetPage","fetchArticles","then","articles","innerHTML","$c9fa63be1c627846$var$renderEvents","url","this","searchQuery","page","fetch","resolve","json","incrementPage","newQuery","constructor","events","markup","map","urlToImage","title","author","description","join","insertAdjacentHTML"],"version":3,"file":"101.e8655a15.js.map"}