const initialData=[{id:"1",title:"Apple. Эволюция компьютера",author:"Владимир Невзоров",img:"https://bukva.ua/img/products/449/449532_200.jpg",plot:"Богато иллюстрированный хронологический справочник по истории компьютеров, в котором увлекательно \n    и в структурированном виде изложена информация о создании и развитии техники Apple на фоне истории \n    персональных компьютеров в целом.\n    В книге даны описания десятков наиболее значимых моделей устройств как Apple, так и других производителей, \n    сопровождающиеся большим количеством оригинальных студийных фотографий.\n    Книга предназначена для широкого круга читателей, интересующихся историей электроники. \n    Она также может послужить источником вдохновения для дизайнеров, маркетологов и предпринимателей."},{id:"2",title:"Как объяснить ребенку информатику",author:"Кэрол Вордерман",img:"https://bukva.ua/img/products/480/480030_200.jpg",plot:"Иллюстрированная энциклопедия в формате инфографики о технических, социальных и культурных аспектах \n    в информатике. Пошагово объясняет, как детям максимально эффективно использовать компьютеры и интернет-сервисы, \n    оставаясь в безопасности. \n    Книга рассказывает обо всем: от хранения данных до жизни в интернет-пространстве, \n    от программирования до компьютерных атак. О том, как компьютеры функционируют, о современном программном \n    обеспечении, устройстве Интернета и цифровом этикете. Все концепты - от хакера до биткоина - \n    объясняются наглядно с помощью иллюстраций и схем."},{id:"3",title:"Путь скрам-мастера. #ScrumMasterWay",author:"Зузана Шохова",img:"https://bukva.ua/img/products/480/480090_200.jpg",plot:"Эта книга поможет вам стать выдающимся скрам-мастером и добиться отличных результатов с вашей командой. \n    Она иллюстрированная и легкая для восприятия - вы сможете прочитать ее за выходные, а пользоваться полученными \n    знаниями будете в течение всей карьеры.\n    Основываясь на 15-летнем опыте, Зузана Шохова рассказывает, какие роли и обязанности есть у скрам-мастера, \n    как ему решать повседневные задачи, какие компетенции нужны, чтобы стать выдающимся скрам-мастером, \n    какими инструментами ему нужно пользоваться."}];localStorage.getItem("books")||localStorage.setItem("books",JSON.stringify(initialData));const leftDiv=document.createElement("div"),rightDiv=document.createElement("div");leftDiv.classList.add("left"),rightDiv.classList.add("right");const rootDiv=document.querySelector("#root");rootDiv.append(leftDiv,rightDiv);const title=document.createElement("h1");title.textContent="Library";const list=document.createElement("ul"),addBtn=document.createElement("button");function renderBooksList(){const t=JSON.parse(localStorage.getItem("books")).map((({title:t,id:e})=>`<li data-id ='${e}'><p class = "book-title">${t}</p><button class ="edit">Edit</button><button class ="delete">Delete</button></li>`)).join("");list.innerHTML="",list.insertAdjacentHTML("afterbegin",t);document.querySelectorAll(".book-title").forEach((t=>{t.addEventListener("click",renderPreview)}));document.querySelectorAll(".delete").forEach((t=>{t.addEventListener("click",deleteBook)}));document.querySelectorAll(".edit").forEach((t=>{t.addEventListener("click",editBook)}))}function renderPreview(t){const e=JSON.parse(localStorage.getItem("books")),o=t.target.parentNode.dataset.id,n=createPreviewMarkup(e.find((({id:t})=>t===o)));console.log(n),rightDiv.innerHTML=n}function createPreviewMarkup({title:t,author:e,img:o,plot:n,id:i}){return`<div id ='${i}' class ="preview">\n<h2>${t}</h2>\n<p>${e}</p>\n<img src ='${o}'/>\n<p>${n}</p>\n</div>`}function deleteBook(t){const e=JSON.parse(localStorage.getItem("books")),o=t.target.parentNode.dataset.id,n=e.filter((({id:t})=>t!==o));localStorage.setItem("books",JSON.stringify(n));const i=document.querySelector(".preview");null!==i&&o===i.id&&(rightDiv.innerHTML=""),renderBooksList()}function addBook(){const t={id:`${Date.now()}`,title:"",author:"",img:"",plot:""},e=createFormMarkup(t);rightDiv.innerHTML=e,fillObject(t);document.querySelector("form").addEventListener("submit",(e=>{e.preventDefault();const o=JSON.parse(localStorage.getItem("books"));if(Object.values(t).some((t=>""===t)))return void alert("Fill all fields!");o.push(t),localStorage.setItem("books",JSON.stringify(o)),renderBooksList();const n=createPreviewMarkup(t);console.log(n),rightDiv.innerHTML=n}))}function createFormMarkup({title:t,author:e,img:o,plot:n}){return`<form>\n  <label>Name:<input type='text' name='title' value='${t}'/></label>\n  <label>Author:<input type='text' name='author' value='${e}'/></label>\n  <label>Image:<input type='text' name='img' value='${o}'/></label>\n  <label>Plot:<input type='text' name='plot' value='${n}'/></label>\n  <button>Save</button>\n  </form>`}function fillObject(t){function e(e){t[e.target.name]=e.target.value}document.querySelectorAll("input").forEach((t=>t.addEventListener("change",e)))}function editBook(t){const e=JSON.parse(localStorage.getItem("books")),o=t.target.parentNode.dataset.id,n=e.find((({id:t})=>t===o)),i=createFormMarkup(n);rightDiv.innerHTML=i,fillObject(n);document.querySelector("form").addEventListener("submit",(t=>{t.preventDefault();const e=JSON.parse(localStorage.getItem("books")),i=e.findIndex((({id:t})=>t===o));e[i]=n,localStorage.setItem("books",JSON.stringify(e)),renderBooksList();const r=createPreviewMarkup(n);rightDiv.innerHTML=r}))}addBtn.textContent="ADD",leftDiv.append(title,list,addBtn),renderBooksList(),addBtn.addEventListener("click",addBook);
//# sourceMappingURL=02-video.53afad5d.js.map
